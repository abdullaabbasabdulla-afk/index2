<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لعبة الضرب السريع</title>
<style>
  body { font-family: Arial, sans-serif; background: #f4f4f4; text-align: center; padding: 20px; }
  h1 { color: #333; }
  .problem { font-size: 32px; margin: 20px 0; }
  input { font-size: 22px; padding: 5px; text-align: center; }
  button { font-size: 18px; padding: 8px 16px; margin: 10px; }
  .stats { font-size: 20px; margin-top: 15px; }
  .feedback { font-size: 20px; margin-top: 10px; }
</style>
</head>
<body>

<h1>لعبة الضرب السريع</h1>
<div id="timer">الوقت: ٣٠ ثانية</div>
<div class="problem" id="problemText"></div>
<input type="number" id="answerInput" placeholder="أدخل الإجابة" disabled>
<br>
<button id="startBtn" onclick="startGame()">ابدأ اللعبة</button>

<div class="feedback" id="feedback"></div>
<div class="stats">
  صحيحة: <span id="correctCount">٠</span> |
  خاطئة: <span id="wrongCount">٠</span>
</div>

<script>
  function toArabicDigits(num) {
    return String(num).replace(/\d/g, d => '٠١٢٣٤٥٦٧٨٩'[d]);
  }

  let correct = 0;
  let wrong = 0;
  let currentProblem = {};
  let timeLeft = 30;
  let timerInterval;

  function generateProblem() {
    const num1 = Math.floor(Math.random() * 9) + 1; 
    const num2 = Math.floor(Math.random() * 9) + 1;
    currentProblem = { num1, num2, answer: num1 * num2 };
    document.getElementById('problemText').textContent = 
      `${toArabicDigits(num1)} × ${toArabicDigits(num2)} = ؟`;
    document.getElementById('answerInput').value = '';
    document.getElementById('answerInput').focus();
  }

  function checkAnswer() {
    const userAnswer = Number(document.getElementById('answerInput').value.trim());
    if (userAnswer === currentProblem.answer) {
      correct++;
      document.getElementById('feedback').textContent = 'إجابة صحيحة ✅';
    } else {
      wrong++;
      document.getElementById('feedback').textContent = 
        `خطأ ❌ — الإجابة الصحيحة: ${toArabicDigits(currentProblem.answer)}`;
    }
    updateStats();
    generateProblem();
  }

  function updateStats() {
    document.getElementById('correctCount').textContent = toArabicDigits(correct);
    document.getElementById('wrongCount').textContent = toArabicDigits(wrong);
  }

  function startGame() {
    correct = 0;
    wrong = 0;
    updateStats();
    timeLeft = 30;
    document.getElementById('startBtn').disabled = true;
    document.getElementById('answerInput').disabled = false;
    generateProblem();

    timerInterval = setInterval(() => {
      timeLeft--;
      document.getElementById('timer').textContent = `الوقت: ${toArabicDigits(timeLeft)} ثانية`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        endGame();
      }
    }, 1000);
  }

  function endGame() {
    document.getElementById('startBtn').disabled = false;
    document.getElementById('answerInput').disabled = true;
    document.getElementById('problemText').textContent = 'انتهى الوقت ⏳';
    document.getElementById('feedback').textContent = 
      `لقد أجبت ${toArabicDigits(correct)} صحيحة و ${toArabicDigits(wrong)} خاطئة`;
  }

  document.getElementById('answerInput').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      checkAnswer();
    }
  });
</script>

</body>
</html>